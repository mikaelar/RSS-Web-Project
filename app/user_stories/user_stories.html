<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage User Stories - Software Requirements Management</title>
    <link rel="stylesheet" href="user_stories.css"> 
</head
>
<body>
    <header class="header">
        <div class="header-left">
            <h1>Software Requirements Management</h1>
        </div>
        <nav>
            <ul>
                <li><a href="../manage_homepage/homepage.php">Home</a></li>
                <li><a href="../create_project/create_project.html">Add Project</a></li>
                <li><a href="../projects/Projects.html" target="_blank">Projects</a></li>
                <li><a href="../settings/settings.html">Settings</a></li>
                <li><a href="../user_stories/UserStories.html">Manage User Stories</a></li>
            </ul>
        </nav>
        <div class="header-right">
            <span id="username"><?php echo htmlspecialchars($_SESSION['username']); ?></span>
            <div class="dropdown">
                <button id="notificationButton" class="notification-btn">üîî Notifications (<?php echo count($notifications); ?>)</button>
                <div id="notificationList" class="dropdown-content">
                    <ul>
                        <?php foreach ($notifications as $notification): ?>
                            <li>
                                <?php echo htmlspecialchars($notification['message']); ?> 
                                <a href="mark_as_read.php?id=<?php echo $notification['id']; ?>">Mark as read</a>
                            </li>
                        <?php endforeach; ?>
                    </ul>
                </div>
            </div>
            
            <button id="logoutButton" onclick="location.href='../login_register/logout.php';">Logout</button>
        </div>
    </header>
    <main>
        <section id="manage-user-stories">
            <h2>Manage User Stories</h2>
            <form method="POST" action="user_stories.php">
                <h3>Add User Story</h3>
                <label for="userStoryTitle">Title:</label>
                <input type="text" id="userStoryTitle" name="userStoryTitle" required>
                <label for="userStoryDescription">Description:</label>
                <textarea id="userStoryDescription" name="userStoryDescription" required></textarea>
                <button type="submit">Add User Story</button>
            </form>
            <form id="editUserStoryForm">
                <h3>Edit User Story</h3>
                <label for="editUserStorySelect">Select User Story:</label>
                <select id="editUserStorySelect" name="editUserStorySelect" required>
                    <!-- User Story options will be populated here -->
                </select>
                <label for="editUserStoryTitle">New Title:</label>
                <input type="text" id="editUserStoryTitle" name="editUserStoryTitle" required>
                <label for="editUserStoryDescription">New Description:</label>
                <textarea id="editUserStoryDescription" name="editUserStoryDescription" required></textarea>
                <button type="submit">Edit User Story</button>
            </form>
            <form id="removeUserStoryForm">
                <h3>Remove User Story</h3>
                <label for="removeUserStorySelect">Select User Story:</label>
                <select id="removeUserStorySelect" name="removeUserStorySelect" required>
                    <!-- User Story options will be populated here -->
                </select>
                <button type="submit">Remove User Story</button>
            </form>
        </section>
    </main>
    <script>
        document.getElementById('notificationButton').onclick = function() {
            var notificationList = document.getElementById('notificationList');
            if (notificationList.style.display === 'none' || notificationList.style.display === '') {
                notificationList.style.display = 'block';
            } else {
                notificationList.style.display = 'none';
            }
        };
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
        // –ü–æ–∫–∞–∑–≤–∞–Ω–µ –∏ —Å–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏—Ç–µ
        $('.notification-btn').on('click', function() {
            $(this).siblings('.dropdown-content').toggle();
        });
    
        // –°–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏—Ç–µ –ø—Ä–∏ –∫–ª–∏–∫ –∏–∑–≤—ä–Ω —Ç—è—Ö
        $(document).on('click', function(event) {
            if (!$(event.target).closest('.dropdown').length) {
                $('.dropdown-content').hide();
            }
        });
    });
    </script>
    
    <footer>
        <p>&copy; 2024 Software Requirements Management</p>
    </footer>
</body>
</html>
